<%- include('../layouts/adminHeader.ejs') %>

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<div class="d-flex flex-row">
  <div class="row">
    <div class="col-md-6">
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <!-- Sidebar content goes here -->
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">
              <i class="typcn typcn-device-desktop menu-icon"></i>
              <span class="menu-title">Dashboard</span>

            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/loadUser" aria-expanded="false" aria-controls="ui-basic">
              <i class="typcn typcn-document-text menu-icon"></i>
              <span class="menu-title">user List</span>

            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/loadCategory" aria-expanded="false"
              aria-controls="ui-basic">
              <i class="typcn typcn-document-text menu-icon"></i>
              <span class="menu-title">Category</span>

            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/productList" aria-expanded="false"
              aria-controls="ui-basic">
              <i class="typcn typcn-document-text menu-icon"></i>
              <span class="menu-title">Product List</span>

            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/addquantity" aria-expanded="false"
              aria-controls="ui-basic">
              <i class="typcn typcn-document-text menu-icon"></i>
              <span class="menu-title">Quantity List</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
<section class="content-main p-5">
  <div class="content-header">
    <div>
      <h2 class="content-title card-title">Product </h2>
      <p>Add, edit or Change Status</p>
    </div>
    <div>
      <input type="text" placeholder="Search Product" class="form-control bg-white">
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="p-5 shadow mb-5 bg-white rounded">
        <form action="/addProduct" method="post" enctype="multipart/form-data">
          <div class="row">
            <div class="col-md-9">
              <h6>1. General info</h6>
            </div>
            <div class="col-md-9">
              <div class="mb-4">
                <label class="form-label">Product title</label>
                <input type="text" placeholder="Type here" class="form-control" name="name">
              </div>
              <div class="mb-4">
                <label class="form-label">Description</label>
                <textarea placeholder="Type here" class="form-control" rows="4" name="description"></textarea>
              </div>
              <div class="mb-4">
                <label class="form-label">Category</label>
                <select class="form-select" name="category">
                  <% category.forEach(function(category) { %>
                    <% if(category.isListed) { %>
                      <option value="<%=category._id%>">
                        <%= category.name %>
                      </option>
                      <% } %>
                  <% }); %>
                </select>
              </div>
             
            </div>
          </div>

          <hr class="mb-4 mt-0">
          <div class="row">
            <div class="col-md-9">
              <h6>2. Pricing</h6>
            </div>
            <div class="col-md-9">
              <div class="mb-4">
                <label class="form-label">Cost in INR</label>
                <input type="text" placeholder="â‚¹00.0" class="form-control" name="price">
              </div>
            </div>
          </div>

          <hr class="mb-4 mt-0">
          <div class="row">
            <div class="col-md-9">
              <h6>3. Media</h6>
            </div>
            <div class="col-md-25">
              <div class="mb-4">
                <label class="form-label">Main Image</label>
                <input class="form-control" multiple type="file" name="images">
              </div>
            </div>
            <!-- <div class="col-md-25">
              <div class="mb-4">
                <label class="form-label">Second Image</label>
                <input class="form-control" multiple type="file" name="images">
              </div>
            </div>
            <div class="col-md-25">
              <div class="mb-4">
                <label class="form-label">Third Image</label>
                <input class="form-control" multiple type="file" name="images">
              </div>
            </div>-->
          </div>

          <div class="d-grid">
            <button class="btn btn-outline-danger">Create Product</button>
            <p><%=(typeof message!=='undefined' )?message:""%></p>
          </div>
        </form>
      </div>
    </div>

    <div class="col-md-8">
      <div class="table-responsive p-5 shadow mb-5 bg-white rounded">
        <table class="table table-hover">
          <thead class="table-danger">
            <tr class="text-center">
              <th>Image</th>
              <th>Name</th>
              <th>Description</th>
              <th>Category</th>  
              <th>Price</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>List/Unlist</th>
            </tr>
          </thead>
          <tbody>
            <% product.forEach((item) => { %>
            <tr>
              <td class="text-center">
                <div class="left">
                  <img src="/uploads/<%= item.images[0] %>" class="img-sm img-thumbnail" alt="Item"
                    data-bs-toggle="modal" data-bs-target="#imageModal<%= item._id %>"
                    style="width:80px;height:fit-content">
                </div>
                
              </td>
              
              <td class="text-center">
                <div class="info">
                  <p class="mb-0">
                    <%= item.name %>
                  </p>
                </div>
              </td>
              <td class="text-center">
                <div class="info">
                  <p class="mb-0">
                    <%= item.description %>
                  </p>
                </div>
              </td>
              <td class="text-center">
                <div class="info">
                  <p class="mb-0">
                    <%= getCategoryName(item.category) %>
                  </p>
                </div>
              </td>
             
              <td class="text-center">
                <div class="info">
                  <p class="mb-0">
                    <%= item.price %>
                  </p>
                </div>
              </td>
              <td class="text-center">
                <a href="/editProductList?id=<%= item._id %>">Edit</a>
              </td>
              <td class="text-center">
                <a href="/deleteProduct?id=<%= item._id %>">Delete</a>
              </td>
              <td class="text-center">
                <% if (item.is_listed) { %>
                  <a href="/changeProductstatus?id=<%= item._id %>">List</a>
                <% } else { %>
                  <a href="/changeProductstatus?id=<%= item._id %>">Unlist</a>
                <% } %>
              </td>
            </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<%- include('../layouts/adminFooter.ejs') %>
